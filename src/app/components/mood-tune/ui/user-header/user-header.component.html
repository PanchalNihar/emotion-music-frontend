<div class="user-header" *ngIf="user">
  <div class="user-greeting">
    <h2>Hi {{ getFirstName(user) }} ðŸ‘‹</h2>
    <p>Ready to discover your perfect soundtrack?</p>
  </div>

  <div class="user-actions">
    <div class="user-profile-dropdown" [class.open]="dropdownOpen">
      <button class="profile-trigger" (click)="toggleDropdown()">
        <img
          class="user-avatar"
          [src]="user.avatar_url || 'default-profile.png'"
          [alt]="user.username"
        />
        <div class="user-details">
          <h3>{{ user.full_name || user.username }}</h3>
          <p>{{ user.email }}</p>
        </div>
        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"
          />
        </svg>
      </button>

      <div class="dropdown-menu" *ngIf="dropdownOpen">
        <button class="dropdown-item" (click)="viewHistory.emit()">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3"
            />
          </svg>
          Mood History
        </button>
      </div>
    </div>

    <button class="logout-btn" (click)="logout.emit()">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path
          d="M16 17v-3H9v-4h7V7l5 5-5 5M14 2a2 2 0 012 2v2h-2V4H4v16h10v-2h2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V4a2 2 0 012-2h10z"
        />
      </svg>
      Logout
    </button>
  </div>
</div>
